<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="utf-8" />
    <title>File Input Test</title>
    <script>
        async function load() {
            arrayHandle = await window.showOpenFilePicker({ multiple: true });
            for (fileHandle of arrayHandle) {
                const file = await fileHandle.getFile();
                const fileContents = await file.text();
                acon = fileContents.split("\n");
                acon[1] += "<metadata><time>2023-10-03T10:14:36Z</time></metadata>"
                res = acon.join("\n");
                console.log(res);
                const writable = await fileHandle.createWritable();
                await writable.write(res);
                await writable.close();
            }
            alert("完了しました")
        }
    </script>
    <style>
        .run {
            padding: 10px 20px;
            font-size: 20px;
            background: #fff;
            color: #000;
            border: solid 2px #000;
            position: absolute;
            top: 50vh;
            left: 50vw;
            transform: translateY(-50%) translateX(-50%);
        }
        .run:hover {
            background: #000;
            color: #fff;
            border:none;
        }
    </style>
</head>

<body>
    <button class="run" onclick="load()">Choose GPX...</button>
</body>

</html>